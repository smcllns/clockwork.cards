<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Clockwork Cards ‚Äî A birthday card that never stops counting</title>
  <meta name="description" content="Live-updating birthday stats ‚Äî heartbeats, miles through space, seconds alive. A permanent URL that counts their life in real time. From $2.99.">
  <meta property="og:title" content="Clockwork Cards">
  <meta property="og:description" content="A birthday card that never stops counting. Live stats, permanent URL, from $2.99.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://clockwork.cards">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Fraunces:opsz,wght@9..144,300;9..144,600;9..144,800&family=Outfit:wght@300;400;500&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
      --cream: #faf7f2;
      --cream-deep: #f3ede4;
      --charcoal: #2a2420;
      --muted: #8a8279;
      --light: #b8b0a6;
      --amber: #b5650a;
      --amber-bright: #d4820a;
      --amber-glow: #f5e6d0;
      --success: #2d7a44;
      --error: #b83a2e;
      --border: #e0d8ce;
      --card-bg: #ffffff;
      --radius: 14px;
    }

    html { scroll-behavior: smooth; }

    body {
      font-family: 'Outfit', system-ui, sans-serif;
      color: var(--charcoal);
      background: var(--cream);
      min-height: 100dvh;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    /* ‚Äî Layout ‚Äî */
    .wrap {
      max-width: 540px;
      margin: 0 auto;
      padding: 0 24px;
    }

    /* ‚Äî Header ‚Äî */
    header {
      padding: 28px 0 0;
      text-align: center;
    }
    .wordmark {
      font-family: 'Space Mono', monospace;
      font-size: 0.8rem;
      font-weight: 400;
      color: var(--light);
      text-decoration: none;
      letter-spacing: 0.02em;
    }

    /* ‚Äî Hero ‚Äî */
    .hero {
      padding: 56px 0 40px;
      text-align: center;
    }
    .hero h1 {
      font-family: 'Fraunces', serif;
      font-weight: 800;
      font-size: clamp(2.2rem, 7vw, 3.2rem);
      line-height: 1.1;
      letter-spacing: -0.02em;
      color: var(--charcoal);
      margin-bottom: 16px;
      animation: fadeUp 0.6s ease-out both;
      font-optical-sizing: auto;
    }
    .hero p {
      font-size: 1.05rem;
      font-weight: 300;
      line-height: 1.55;
      color: var(--muted);
      max-width: 380px;
      margin: 0 auto;
      animation: fadeUp 0.6s ease-out 0.15s both;
    }
    .hero .price-tag {
      display: inline-block;
      font-family: 'Space Mono', monospace;
      font-size: 0.85rem;
      font-weight: 700;
      color: var(--amber);
      margin-top: 14px;
      animation: fadeUp 0.5s ease-out 0.25s both;
    }

    /* ‚Äî Builder Form ‚Äî */
    .builder {
      padding-bottom: 16px;
      animation: fadeUp 0.6s ease-out 0.3s both;
    }

    .field-group { margin-bottom: 20px; }

    .field-label {
      display: block;
      font-size: 0.8rem;
      font-weight: 500;
      color: var(--muted);
      margin-bottom: 8px;
      letter-spacing: 0.02em;
    }

    .url-input {
      display: flex;
      align-items: center;
      background: var(--card-bg);
      border: 1.5px solid var(--border);
      border-radius: var(--radius);
      padding: 0 16px;
      height: 56px;
      transition: border-color 0.2s, box-shadow 0.2s;
    }
    .url-input:focus-within {
      border-color: var(--amber-bright);
      box-shadow: 0 0 0 3px rgba(212, 130, 10, 0.1);
    }
    .url-input.valid {
      border-color: var(--success);
      box-shadow: 0 0 0 3px rgba(45, 122, 68, 0.08);
    }
    .url-input.invalid {
      border-color: var(--error);
      box-shadow: 0 0 0 3px rgba(184, 58, 46, 0.08);
    }
    .url-prefix {
      font-family: 'Space Mono', monospace;
      font-size: 0.85rem;
      color: var(--light);
      white-space: nowrap;
      user-select: none;
      flex-shrink: 0;
    }
    .url-input input {
      flex: 1;
      border: none;
      outline: none;
      background: transparent;
      font-family: 'Space Mono', monospace;
      font-size: 0.95rem;
      font-weight: 700;
      color: var(--charcoal);
      padding: 0;
      min-width: 0;
    }
    .url-input input::placeholder {
      color: var(--light);
      font-weight: 400;
    }

    .name-status {
      font-size: 0.78rem;
      margin-top: 6px;
      height: 20px;
      display: flex;
      align-items: center;
      gap: 4px;
    }
    .name-status.available { color: var(--success); }
    .name-status.taken { color: var(--error); }
    .name-status.checking { color: var(--muted); }

    .dob-input {
      display: flex;
      align-items: center;
      background: var(--card-bg);
      border: 1.5px solid var(--border);
      border-radius: var(--radius);
      padding: 0 16px;
      height: 56px;
      transition: border-color 0.2s, box-shadow 0.2s;
    }
    .dob-input:focus-within {
      border-color: var(--amber-bright);
      box-shadow: 0 0 0 3px rgba(212, 130, 10, 0.1);
    }
    .dob-input input {
      flex: 1;
      border: none;
      outline: none;
      background: transparent;
      font-family: 'Outfit', sans-serif;
      font-size: 1rem;
      color: var(--charcoal);
      padding: 0;
    }

    /* ‚Äî Preview ‚Äî */
    .preview {
      opacity: 0;
      transform: translateY(16px);
      pointer-events: none;
      height: 0;
      overflow: hidden;
      transition: opacity 0.5s ease, transform 0.5s ease;
    }
    .preview.active {
      opacity: 1;
      transform: translateY(0);
      pointer-events: auto;
      height: auto;
      overflow: visible;
      padding-bottom: 20px;
    }

    .preview-card {
      background: var(--card-bg);
      border: 1.5px solid var(--border);
      border-radius: 18px;
      padding: 28px 24px;
      box-shadow:
        0 1px 2px rgba(42, 36, 32, 0.04),
        0 4px 12px rgba(42, 36, 32, 0.04),
        0 12px 32px rgba(42, 36, 32, 0.03);
    }
    .preview.alive .preview-card {
      border-color: rgba(212, 130, 10, 0.25);
      box-shadow:
        0 0 0 1px rgba(212, 130, 10, 0.06),
        0 1px 2px rgba(42, 36, 32, 0.04),
        0 4px 12px rgba(42, 36, 32, 0.04),
        0 12px 32px rgba(42, 36, 32, 0.03),
        0 0 48px rgba(212, 130, 10, 0.06);
      transition: border-color 0.6s, box-shadow 0.8s;
    }

    .preview-header {
      font-family: 'Space Mono', monospace;
      font-size: 0.75rem;
      color: var(--light);
      margin-bottom: 20px;
      padding-bottom: 12px;
      border-bottom: 1px solid var(--border);
    }

    .stats-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
    }

    .stat {
      opacity: 0;
      transform: translateY(8px);
    }
    .stat.visible {
      animation: fadeUp 0.4s ease-out both;
    }

    .stat-icon {
      font-size: 1.3rem;
      margin-bottom: 6px;
    }
    .stat-value {
      font-family: 'Space Mono', monospace;
      font-size: 1.15rem;
      font-weight: 700;
      color: var(--charcoal);
      line-height: 1.2;
      letter-spacing: -0.01em;
      min-height: 1.4em;
    }
    .stat-label {
      font-size: 0.78rem;
      font-weight: 400;
      color: var(--muted);
      margin-top: 2px;
    }

    /* ‚Äî Checkout ‚Äî */
    .checkout {
      opacity: 0;
      transform: translateY(12px);
      pointer-events: none;
      height: 0;
      overflow: hidden;
      transition: opacity 0.4s ease, transform 0.4s ease;
    }
    .checkout.active {
      opacity: 1;
      transform: translateY(0);
      pointer-events: auto;
      height: auto;
      overflow: visible;
      padding-bottom: 48px;
    }

    .buy-btn {
      display: block;
      width: 100%;
      padding: 16px 24px;
      background: var(--amber);
      color: #fff;
      border: none;
      border-radius: var(--radius);
      font-family: 'Outfit', sans-serif;
      font-size: 1.05rem;
      font-weight: 500;
      cursor: pointer;
      transition: background 0.2s, transform 0.1s, box-shadow 0.2s;
      text-align: center;
      text-decoration: none;
      letter-spacing: 0.01em;
    }
    .buy-btn:hover {
      background: var(--amber-bright);
      box-shadow: 0 4px 16px rgba(181, 101, 10, 0.25);
    }
    .buy-btn:active { transform: scale(0.985); }

    .trust {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-top: 14px;
      font-size: 0.75rem;
      color: var(--light);
    }
    .trust span::before {
      content: '‚úì ';
      color: var(--success);
    }

    /* ‚Äî How it works ‚Äî */
    .how {
      padding: 48px 0 0;
      border-top: 1px solid var(--border);
    }
    .how h2 {
      font-family: 'Fraunces', serif;
      font-weight: 600;
      font-size: 1.2rem;
      text-align: center;
      margin-bottom: 28px;
      color: var(--charcoal);
    }
    .steps {
      display: grid;
      grid-template-columns: 1fr 1fr 1fr;
      gap: 16px;
      text-align: center;
      margin-bottom: 48px;
    }
    .step-num {
      font-family: 'Fraunces', serif;
      font-weight: 800;
      font-size: 1.6rem;
      color: var(--amber-glow);
      line-height: 1;
      margin-bottom: 6px;
    }
    .step-title {
      font-weight: 500;
      font-size: 0.85rem;
      color: var(--charcoal);
      margin-bottom: 2px;
    }
    .step-desc {
      font-size: 0.72rem;
      color: var(--light);
      line-height: 1.4;
    }

    /* ‚Äî Demo link ‚Äî */
    .demo {
      text-align: center;
      padding-bottom: 56px;
    }
    .demo a {
      font-size: 0.85rem;
      color: var(--amber);
      text-decoration: none;
      font-weight: 500;
      transition: color 0.2s;
    }
    .demo a:hover { color: var(--amber-bright); text-decoration: underline; }

    /* ‚Äî Footer ‚Äî */
    footer {
      padding: 20px 0;
      text-align: center;
      font-size: 0.72rem;
      color: var(--light);
      border-top: 1px solid var(--border);
    }

    /* ‚Äî Animations ‚Äî */
    @keyframes fadeUp {
      from { opacity: 0; transform: translateY(12px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }

    .checking-dot {
      display: inline-block;
      animation: pulse 1s ease-in-out infinite;
    }

    /* ‚Äî Responsive ‚Äî */
    @media (max-width: 480px) {
      .hero { padding: 40px 0 32px; }
      .stats-grid { gap: 16px; }
      .stat-value { font-size: 1rem; }
      .steps { grid-template-columns: 1fr; gap: 20px; }
      .trust { flex-direction: column; align-items: center; gap: 6px; }
    }

    @media (prefers-reduced-motion: reduce) {
      *, *::before, *::after {
        animation-duration: 0.01ms !important;
        transition-duration: 0.01ms !important;
      }
    }

    /* ‚Äî Noscript ‚Äî */
    noscript p {
      text-align: center;
      padding: 48px 24px;
      color: var(--muted);
      font-size: 0.95rem;
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <a href="/" class="wordmark">clockwork.cards</a>
    </header>

    <section class="hero">
      <h1>A birthday card that never stops counting</h1>
      <p>Heartbeats, miles through space, seconds alive ‚Äî a permanent URL that updates in real time.</p>
      <span class="price-tag">From $2.99</span>
    </section>

    <section class="builder">
      <div class="field-group">
        <label class="field-label" for="name-input">Pick your URL</label>
        <div class="url-input" id="url-input-wrap">
          <span class="url-prefix">clockwork.cards/</span>
          <input
            type="text"
            id="name-input"
            placeholder="name"
            autocomplete="off"
            autocapitalize="off"
            autocorrect="off"
            spellcheck="false"
            maxlength="30"
            autofocus
          >
        </div>
        <div class="name-status" id="name-status"></div>
      </div>

      <div class="field-group">
        <label class="field-label" for="dob-input">When were they born?</label>
        <div class="dob-input">
          <input type="date" id="dob-input" min="1900-01-01">
        </div>
      </div>
    </section>

    <section class="preview" id="preview">
      <div class="preview-card">
        <div class="preview-header" id="preview-url">clockwork.cards/‚Äî</div>
        <div class="stats-grid">
          <div class="stat" id="stat-seconds">
            <div class="stat-icon">‚è≥</div>
            <div class="stat-value" id="val-seconds">‚Äî</div>
            <div class="stat-label">seconds alive</div>
          </div>
          <div class="stat" id="stat-heartbeats">
            <div class="stat-icon">‚ù§Ô∏è</div>
            <div class="stat-value" id="val-heartbeats">‚Äî</div>
            <div class="stat-label">heartbeats</div>
          </div>
          <div class="stat" id="stat-miles">
            <div class="stat-icon">üöÄ</div>
            <div class="stat-value" id="val-miles">‚Äî</div>
            <div class="stat-label">miles through space</div>
          </div>
          <div class="stat" id="stat-days">
            <div class="stat-icon">üìÖ</div>
            <div class="stat-value" id="val-days">‚Äî</div>
            <div class="stat-label">days on Earth</div>
          </div>
        </div>
      </div>
    </section>

    <section class="checkout" id="checkout">
      <a class="buy-btn" id="buy-btn" href="#">Get this card ‚Äî $2.99</a>
      <div class="trust">
        <span>One-time payment</span>
        <span>No subscription</span>
        <span>Lives forever</span>
      </div>
    </section>

    <section class="how">
      <h2>How it works</h2>
      <div class="steps">
        <div>
          <div class="step-num">1</div>
          <div class="step-title">Pick a name</div>
          <div class="step-desc">Choose a permanent URL</div>
        </div>
        <div>
          <div class="step-num">2</div>
          <div class="step-title">Add their birthday</div>
          <div class="step-desc">We calculate the rest</div>
        </div>
        <div>
          <div class="step-num">3</div>
          <div class="step-title">Share it</div>
          <div class="step-desc">Stats update in real time</div>
        </div>
      </div>
    </section>

    <section class="demo">
      <a href="/oscar">See a live example ‚Äî clockwork.cards/oscar ‚Üó</a>
    </section>

    <footer>¬© 2026 clockwork.cards</footer>
  </div>

  <noscript><p>Please enable JavaScript to create your card.</p></noscript>

  <script>
    const nameInput = document.getElementById('name-input');
    const nameStatus = document.getElementById('name-status');
    const urlWrap = document.getElementById('url-input-wrap');
    const dobInput = document.getElementById('dob-input');
    const preview = document.getElementById('preview');
    const checkout = document.getElementById('checkout');
    const buyBtn = document.getElementById('buy-btn');
    const previewUrl = document.getElementById('preview-url');

    // Set max date to today
    dobInput.max = new Date().toISOString().split('T')[0];

    let currentName = '';
    let nameAvailable = false;
    let checkTimer = null;
    let tickInterval = null;
    let birthDate = null;

    // ‚Äî Name input ‚Äî
    nameInput.addEventListener('input', () => {
      nameInput.value = nameInput.value.toLowerCase().replace(/[^a-z0-9-]/g, '');
      const name = nameInput.value.replace(/^-+|-+$/g, '');
      currentName = name;

      if (name.length < 2) {
        urlWrap.className = 'url-input';
        nameStatus.className = 'name-status';
        nameStatus.textContent = '';
        nameAvailable = false;
        updatePreview();
        return;
      }

      urlWrap.className = 'url-input';
      nameStatus.className = 'name-status checking';
      nameStatus.innerHTML = '<span class="checking-dot">‚Ä¢</span> Checking‚Ä¶';

      clearTimeout(checkTimer);
      checkTimer = setTimeout(() => checkName(name), 300);
    });

    async function checkName(name) {
      if (name !== currentName) return;
      try {
        const res = await fetch(`/api/check/${encodeURIComponent(name)}`);
        const data = await res.json();
        if (name !== currentName) return;

        nameAvailable = data.available;
        if (data.available) {
          urlWrap.className = 'url-input valid';
          nameStatus.className = 'name-status available';
          nameStatus.textContent = '‚úì Available';
        } else {
          urlWrap.className = 'url-input invalid';
          nameStatus.className = 'name-status taken';
          nameStatus.textContent = data.reason === 'reserved' ? '‚úó Reserved name' : '‚úó Already taken';
        }
        updatePreview();
      } catch {
        nameStatus.className = 'name-status';
        nameStatus.textContent = '';
      }
    }

    // ‚Äî DOB input ‚Äî
    dobInput.addEventListener('change', () => {
      const val = dobInput.value;
      if (val) {
        birthDate = new Date(val + 'T00:00:00');
      } else {
        birthDate = null;
      }
      updatePreview();
    });

    // ‚Äî Preview logic ‚Äî
    function updatePreview() {
      const ready = nameAvailable && currentName.length >= 2 && birthDate;

      if (!ready) {
        preview.classList.remove('active', 'alive');
        checkout.classList.remove('active');
        if (tickInterval) { clearInterval(tickInterval); tickInterval = null; }
        document.querySelectorAll('.stat').forEach(s => s.classList.remove('visible'));
        return;
      }

      previewUrl.textContent = 'clockwork.cards/' + currentName;

      // Show preview
      preview.classList.add('active');

      // Stagger stat reveals + count up
      const stats = document.querySelectorAll('.stat');
      stats.forEach((stat, i) => {
        setTimeout(() => {
          stat.classList.add('visible');
          stat.style.animationDelay = '0s';
        }, i * 120);
      });

      // Count up then tick
      const target = calcStats(birthDate);
      countUp(target, 1200, () => {
        preview.classList.add('alive');
        tickInterval = setInterval(() => {
          const live = calcStats(birthDate);
          setStatValues(live);
        }, 1000);
      });

      // Show checkout after count-up
      setTimeout(() => {
        checkout.classList.add('active');
        buyBtn.textContent = `Get clockwork.cards/${currentName} ‚Äî $2.99`;
        // Smooth scroll to checkout
        setTimeout(() => {
          checkout.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }, 100);
      }, 1600);
    }

    function calcStats(dob) {
      const ms = Date.now() - dob.getTime();
      const seconds = Math.floor(ms / 1000);
      return {
        seconds,
        heartbeats: Math.floor(seconds * 80 / 60),
        miles: Math.floor((seconds / 3600) * 67000),
        days: Math.floor(seconds / 86400),
      };
    }

    function formatNum(n) {
      if (n >= 1e9) return (n / 1e9).toFixed(1) + ' billion';
      if (n >= 1e6) return (n / 1e6).toFixed(1) + ' million';
      return n.toLocaleString();
    }

    function setStatValues(s) {
      document.getElementById('val-seconds').textContent = s.seconds.toLocaleString();
      document.getElementById('val-heartbeats').textContent = formatNum(s.heartbeats);
      document.getElementById('val-miles').textContent = formatNum(s.miles);
      document.getElementById('val-days').textContent = s.days.toLocaleString();
    }

    function countUp(target, duration, onDone) {
      const start = performance.now();
      function tick(now) {
        const t = Math.min((now - start) / duration, 1);
        const e = 1 - Math.pow(1 - t, 3);
        setStatValues({
          seconds: Math.floor(target.seconds * e),
          heartbeats: Math.floor(target.heartbeats * e),
          miles: Math.floor(target.miles * e),
          days: Math.floor(target.days * e),
        });
        if (t < 1) {
          requestAnimationFrame(tick);
        } else {
          onDone();
        }
      }
      requestAnimationFrame(tick);
    }

    // ‚Äî Buy button ‚Äî
    buyBtn.addEventListener('click', (e) => {
      e.preventDefault();
      if (!nameAvailable || !birthDate) return;

      const dob = dobInput.value;
      const params = new URLSearchParams({
        'metadata[cardName]': currentName,
        'metadata[dob]': dob,
        'metadata[displayName]': currentName.charAt(0).toUpperCase() + currentName.slice(1),
        'success_url': `https://clockwork.cards/${currentName}?welcome=true`,
      });
      window.location.href = `https://buy.polar.sh/polar_cl_e4UijEKyYPBWwsVHxdg6jJt1t3tOqiHi5CtRI3itZ5L?${params}`;
    });
  </script>
</body>
</html>
